(function(t){function e(e){for(var o,s,a=e[0],c=e[1],u=e[2],d=0,f=[];d<a.length;d++)s=a[d],i[s]&&f.push(i[s][0]),i[s]=0;for(o in c)Object.prototype.hasOwnProperty.call(c,o)&&(t[o]=c[o]);l&&l(e);while(f.length)f.shift()();return r.push.apply(r,u||[]),n()}function n(){for(var t,e=0;e<r.length;e++){for(var n=r[e],o=!0,a=1;a<n.length;a++){var c=n[a];0!==i[c]&&(o=!1)}o&&(r.splice(e--,1),t=s(s.s=n[0]))}return t}var o={},i={app:0},r=[];function s(e){if(o[e])return o[e].exports;var n=o[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=t,s.c=o,s.d=function(t,e,n){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)s.d(n,o,function(e){return t[e]}.bind(null,o));return n},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="/";var a=window["webpackJsonp"]=window["webpackJsonp"]||[],c=a.push.bind(a);a.push=e,a=a.slice();for(var u=0;u<a.length;u++)e(a[u]);var l=c;r.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"011d":function(t,e,n){"use strict";var o=n("8d82"),i=n.n(o);i.a},"0cfb":function(t,e,n){},"0f23":function(t,e,n){"use strict";var o=n("adf1"),i=n.n(o);i.a},"1b40":function(t,e,n){"use strict";var o=n("cb7e"),i=n.n(o);i.a},"3c42":function(t,e,n){"use strict";var o=n("57d1"),i=n.n(o);i.a},"56d7":function(t,e,n){"use strict";n.r(e);n("cadf"),n("551c"),n("f751"),n("097d");var o=n("2b0e"),i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("Header"),n("div",{staticClass:"notificationholder"},[n("transition-group",{attrs:{name:"card",tag:"ul"}},t._l(t.getNotifications,function(e,o){return n("Notification",{key:o+1,attrs:{type:e.type,content:e.message,index:o,deleteThis:t.removeNotification}})}),1)],1),n("transition",{attrs:{name:"fade",mode:"out-in"}},["/"===this.$router.history.current.path?n("Sidebar"):t._e()],1),n("div",{attrs:{id:"container"}},[n("transition",{attrs:{name:"fade",mode:"out-in"}},[n("router-view")],1),n("transition",{attrs:{name:"fade"}},["/"===this.$router.history.current.path?n("button",{staticClass:"smallgtaddbutton",on:{click:t.goToAdd}},[t._v("+ add")]):t._e()])],1)],1)},r=[],s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"nav"},[n("button",{class:{active:t.checkSidebar,show:t.checkUrl},on:{click:t.toggleSidebar}},[t._v("filter")]),n("div",{staticClass:"logocontainer"},[n("h1",{on:{click:function(e){return t.goHome()}}},[t._v("trondo")])]),n("ul",{class:{navlinks:!0,open:t.menuClass}},[t.checkIfAuth?t._e():n("li",{on:{click:t.toggleMenu}},[n("router-link",{attrs:{to:"/login"}},[t._v("Log In")])],1),t.checkIfAuth?t._e():n("li",{on:{click:t.toggleMenu}},[n("router-link",{attrs:{to:"/register"}},[t._v("Sign up")])],1),t.checkIfAuth?n("li",[t._v("Logged in as "+t._s(t.getUser.name))]):t._e(),t.checkIfAuth?n("li",{on:{click:t.logOut}},[t._v("Log out")]):t._e()]),n("font-awesome-icon",{class:{hamburger:!0,open:t.menuClass},attrs:{icon:"bars"},on:{click:t.toggleMenu}})],1)},a=[],c={name:"Header",data:function(){return{open:!1}},methods:{goHome:function(){this.$router.push("/"),this.$store.dispatch("notify",{message:"test",type:"error"})},logOut:function(){this.$store.dispatch("logOut"),this.$router.push("login"),this.toggleMenu()},toggleMenu:function(){this.open=!this.open,this.$store.getters.getSidebarState&&this.$store.dispatch("toggleSidebar")},toggleSidebar:function(){this.open&&(this.open=!this.open),this.$store.dispatch("toggleSidebar")}},computed:{checkIfAuth:function(){return this.$store.getters.checkIfAuth},getUser:function(){return this.$store.getters.getCurrentUser},menuClass:function(){return this.open},checkSidebar:function(){return this.$store.getters.getSidebarState},checkUrl:function(){return this.$store.getters.checkIfAuth}}},u=c,l=(n("cbf2"),n("2877")),d=Object(l["a"])(u,s,a,!1,null,"0da36740",null),f=d.exports,p=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{class:{sidebar:!0,open:t.checkSidebar}},[n("div",{staticClass:"filter"},[n("p",{staticClass:"filterheader"},[t._v("filter")]),n("div",{class:t.setClassBasedOnFIlter("none"),on:{click:function(e){return t.setFilter("none")}}},[n("div",{staticClass:"pin"}),n("p",[t._v("none")])]),n("div",{class:t.setClassBasedOnFIlter("personal"),on:{click:function(e){return t.setFilter("personal")}}},[n("div",{staticClass:"pin"}),n("p",[t._v("personal")])]),n("div",{class:t.setClassBasedOnFIlter("business"),on:{click:function(e){return t.setFilter("business")}}},[n("div",{staticClass:"pin"}),n("p",[t._v("business")])])]),n("button",{on:{click:t.goToAdd}},[t._v("+ Add")])])},m=[],h={name:"Sidebar",methods:{goToAdd:function(){this.$router.push("/add")},setFilter:function(t){this.$store.dispatch("setFilter",t),this.$store.dispatch("toggleSidebar")},setClassBasedOnFIlter:function(t){return t===this.$store.getters.getCurrentFilter?"filterbutton active":"filterbutton"}},computed:{checkSidebar:function(){return this.$store.getters.getSidebarState}}},v=h,g=(n("1b40"),Object(l["a"])(v,p,m,!1,null,"0a7784f5",null)),b=g.exports,k=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("li",{class:t.setClass},[n("p",[t._v(t._s(t.content))]),n("span",{on:{click:function(e){return t.deleteThis(t.index)}}},[n("font-awesome-icon",{attrs:{icon:"times"}})],1)])},_=[],w=(n("c5f6"),{name:"notification",props:{type:String,content:String,deleteThis:Function,index:Number},computed:{setClass:function(){return"success"===this.type?"notification success":"notification error"}}}),y=w,$=(n("8f62"),Object(l["a"])(y,k,_,!1,null,"6337a438",null)),C=$.exports,x={name:"app",components:{Header:f,Sidebar:b,Notification:C},methods:{goToAdd:function(){this.$router.push("/add")},removeNotification:function(t){this.$store.dispatch("removeNotification",{index:t})}},computed:{getNotifications:function(){return this.$store.getters.getNotifications}},created:function(){var t=this;this.$store.dispatch("checkIfAuth").then(function(){return t.$store.dispatch("handleFetchedTodos")}).catch(function(e){return t.$router.push("/login")})}},S=x,O=(n("cf25"),Object(l["a"])(S,i,r,!1,null,null,null)),T=O.exports,A=(n("7f7f"),n("8c4f")),I=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("transition-group",{staticClass:"todo-container",attrs:{name:"fade",tag:"div"}},t._l(t.todos,function(e,o){return n("Todo",{key:o+1,attrs:{index:o,content:e,remove:t.removeTodo}})}),1)},F=[],N=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"todo"},[n("div",{staticClass:"categ"},[t._v(t._s("business"===t.content.kind?"B":"P"))]),n("p",{staticClass:"title"},[t._v(t._s(t.content.title))]),t.content.due?n("p",{staticClass:"date"},[t._v(t._s(t.content.due))]):t._e(),n("div",{staticClass:"delete",on:{click:function(e){return t.remove(t.content._id)}}},[n("font-awesome-icon",{attrs:{icon:"trash"}})],1)])},P=[],j={name:"Todo",props:{content:Object,remove:Function,index:Number},methods:{checkKind:function(t){var e="business"===t?"B":"P";return e}}},B=j,z=(n("011d"),Object(l["a"])(B,N,P,!1,null,"1abe4868",null)),E=z.exports,M={name:"Todos",data:function(){return{listener:null}},methods:{removeTodo:function(t){var e=this;this.$store.dispatch("removeTodo",{id:t}).then(function(){return e.$store.dispatch("handleFetchedTodos")})}},computed:{todos:function(){return this.$store.getters.getTodos}},components:{Todo:E}},U=M,L=(n("0f23"),Object(l["a"])(U,I,F,!1,null,"523a4a23",null)),H=L.exports,D=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"formcontainer"}},[n("form",{on:{submit:function(e){return e.preventDefault(),t.post(e)}}},[n("h2",[t._v("Add a new task")]),n("div",{staticClass:"formgroup"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.title,expression:"title"}],ref:"title",staticClass:"text",attrs:{type:"text",placeholder:"task"},domProps:{value:t.title},on:{input:function(e){e.target.composing||(t.title=e.target.value)}}})]),n("div",{staticClass:"formgroup"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.due,expression:"due"}],staticClass:"text",attrs:{type:"text",placeholder:"deadline (optional)"},domProps:{value:t.due},on:{input:function(e){e.target.composing||(t.due=e.target.value)}}})]),n("div",{staticClass:"formgroup"},[n("select",{directives:[{name:"model",rawName:"v-model",value:t.kind,expression:"kind"}],on:{change:function(e){var n=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){var e="_value"in t?t._value:t.value;return e});t.kind=e.target.multiple?n:n[0]}}},[n("option",{attrs:{value:"personal"}},[t._v("personal")]),n("option",{attrs:{value:"business"}},[t._v("business")])])]),n("button",{class:t.showButton,attrs:{type:"submit"}},[t._v("+ add")])])])},J=[],W={data:function(){return{title:"",due:"",kind:"personal",sendable:!1}},mounted:function(){this.$refs.title.focus()},methods:{post:function(){var t=this,e=this.$store.getters.getCurrentUser;""!==this.title.trim()&&(this.$store.dispatch("addTodo",{title:this.title,kind:this.kind,due:this.due,id:e.id}).then(function(){return t.$store.dispatch("handleFetchedTodos")}),this.$router.push("/"))}},computed:{showButton:function(){return this.title.trim()?"":"disabled"}}},q=W,K=(n("3c42"),Object(l["a"])(q,D,J,!1,null,"1cb2eca7",null)),G=K.exports,Q=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"formcontainer"}},[n("form",{on:{submit:function(e){return e.preventDefault(),t.register(e)}}},[n("h2",[t._v("Sign up")]),n("div",{staticClass:"formgroup"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.name,expression:"name"}],ref:"register",staticClass:"text",attrs:{type:"text",placeholder:"name"},domProps:{value:t.name},on:{input:function(e){e.target.composing||(t.name=e.target.value)}}})]),n("div",{staticClass:"formgroup"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.email,expression:"email"}],ref:"register",staticClass:"text",attrs:{type:"text",placeholder:"email"},domProps:{value:t.email},on:{input:function(e){e.target.composing||(t.email=e.target.value)}}})]),n("div",{staticClass:"formgroup"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],staticClass:"text",attrs:{type:"password",placeholder:"password"},domProps:{value:t.password},on:{input:function(e){e.target.composing||(t.password=e.target.value)}}})]),n("button",{attrs:{type:"submit"}},[t._v("Sign up")]),n("p",[t._v("\n      Already have an account?\n      "),n("br"),n("router-link",{staticClass:"blue",attrs:{to:"/login"}},[t._v("Log in instead.")])],1)])])},R=[],V={name:"register",data:function(){return{name:"",email:"",password:""}},methods:{register:function(){var t=this;this.name&&this.email&&this.password&&this.$store.dispatch("register",{email:this.email,password:this.password,name:this.name}).then(function(){return t.$router.push("/")})}},mounted:function(){this.$refs.register.focus()}},X=V,Y=(n("f9b2"),Object(l["a"])(X,Q,R,!1,null,"d980bef2",null)),Z=Y.exports,tt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"formcontainer"}},[n("form",{on:{submit:function(e){return e.preventDefault(),t.login(e)}}},[n("h2",[t._v("Log in")]),n("div",{staticClass:"formgroup"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.email,expression:"email"}],ref:"login",staticClass:"text",attrs:{type:"text",placeholder:"email"},domProps:{value:t.email},on:{input:function(e){e.target.composing||(t.email=e.target.value)}}})]),n("div",{staticClass:"formgroup"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],staticClass:"text",attrs:{type:"password",placeholder:"password"},domProps:{value:t.password},on:{input:function(e){e.target.composing||(t.password=e.target.value)}}})]),n("button",{attrs:{type:"submit"}},[t._v("Log in")]),n("p",[t._v("\n      Don't have an account?\n      "),n("br"),n("router-link",{staticClass:"blue",attrs:{to:"/register"}},[t._v("Make one instead.")])],1)])])},et=[],nt={name:"login",data:function(){return{email:"",password:""}},methods:{login:function(){var t=this;this.$store.dispatch("login",{email:this.email,password:this.password}).then(function(){return t.$router.push("/")}).catch(function(t){return console.log("what the fuck did you just do")})}},mounted:function(){this.$refs.login.focus()}},ot=nt,it=(n("fc40"),Object(l["a"])(ot,tt,et,!1,null,"563bc81e",null)),rt=it.exports,st=n("bc3a"),at=n.n(st);o["a"].use(A["a"]);var ct=new A["a"]({routes:[{path:"*",redirect:"/login"},{path:"/register",component:Z,name:"register"},{path:"/login",component:rt,name:"login"},{path:"/",component:H,name:"home",meta:{requiresAuth:!0}},{path:"/add",component:G}]});ct.beforeEach(function(t,e,n){"register"!==t.name&&"login"!==t.name||n(),at.a.get("http://localhost:4000/users/me").then(function(t){n()}).catch(function(t){})});var ut=ct,lt=(n("20d6"),n("2f62"));o["a"].use(lt["a"]);var dt=new lt["a"].Store({state:{strict:!0,todos:[],filterBy:"none",notifications:[],user:{},token:localStorage.getItem("token")||"",authorized:!1,sideBarOpen:!1,listener:null},getters:{getTodos:function(t){return"none"===t.filterBy?t.todos:t.todos.filter(function(e){return e.kind===t.filterBy})},getCurrentFilter:function(t){return t.filterBy},getCurrentUser:function(t){return t.user},checkIfAuth:function(t){return t.authorized},getSidebarState:function(t){return t.sideBarOpen},getNotifications:function(t){return t.notifications}},mutations:{toggleSidebar:function(t){t.sideBarOpen=!t.sideBarOpen},setFilter:function(t,e){t.filterBy=e},notify:function(t,e){var n=e.message,o=e.type;t.notifications.push({message:n,type:o}),setTimeout(function(){var e=t.notifications.findIndex(function(t){return t.message===n});t.notifications.splice(e,1)},9e3)},authorize:function(t,e){t.authorized=!0;var n={name:e.user.name,email:e.user.email,id:e.user.uid};t.user=n,t.token=e.token},unAuthorize:function(t){t.authorized=!1,t.user={}},handleFetchedTodos:function(t,e){t.todos=e},removeNotification:function(t,e){var n=e.index;t.notifications.splice(n,1)}},actions:{register:function(t,e){var n=t.commit,o=e.email,i=e.password,r=e.name;return new Promise(function(t,e){at.a.post("http://localhost:4000/users",{email:o,password:i,name:r}).then(function(e){var o=e.data.token,i=e.data.user;n("authorize",{user:i,token:o}),localStorage.setItem("token",{token:o,user:i}),at.a.defaults.headers.common["Authorization"]=o,n("notify",{message:"Welcome ".concat(i.name),type:"success"}),t(e)}).catch(function(t){e(t),localStorage.removeItem("token")})})},login:function(t,e){var n=t.commit,o=e.email,i=e.password;return new Promise(function(t,e){at.a.post("http://localhost:4000/users/login",{email:o,password:i}).then(function(e){var o=e.data.token,i=e.data.user;n("authorize",{user:i,token:o}),localStorage.setItem("token",o),at.a.defaults.headers.common["Authorization"]=o,n("notify",{message:"Welcome ".concat(i.name),type:"success"}),t(e)}).catch(function(t){e(t),console.log(t)})})},logOut:function(t){var e=t.commit;localStorage.removeItem("token"),e("unAuthorize")},addTodo:function(t,e){t.commit;var n=e.title,o=e.kind,i=e.due,r=e.id;return new Promise(function(t,e){at.a.post("http://localhost:4000/tasks",{title:n,kind:o,due:i,id:r}).then(function(e){return t(e)})})},handleFetchedTodos:function(t,e){var n=t.commit;at.a.get("http://localhost:4000/tasks").then(function(t){n("handleFetchedTodos",t.data)})},removeTodo:function(t,e){var n=t.commit,o=e.id;return new Promise(function(t,e){at.a.delete("http://localhost:4000/tasks/".concat(o)).then(function(e){n("notify",{message:"Successfully deleted task",type:"success"}),t(e)})})},checkIfAuth:function(t){var e=t.commit;return new Promise(function(t,n){at.a.get("http://localhost:4000/users/me").then(function(n){e("authorize",{user:n.data,token:localStorage.getItem("token")}),t()}).catch(function(t){return n(t)})})},notify:function(t,e){var n=t.commit;n("notify",e)},setFilter:function(t,e){var n=t.commit;n("setFilter",e)},toggleSidebar:function(t){var e=t.commit;e("toggleSidebar")},removeNotification:function(t,e){var n=t.commit;n("removeNotification",e)}}}),ft=n("ecee"),pt=n("c074"),mt=n("ad3d");o["a"].prototype.$http=at.a,ft["c"].add(pt["a"],pt["c"],pt["b"]);var ht=localStorage.getItem("token");ht&&(o["a"].prototype.$http.defaults.headers.common["Authorization"]=ht),o["a"].component("font-awesome-icon",mt["a"]),o["a"].config.productionTip=!1,new o["a"]({store:dt,router:ut,render:function(t){return t(T)}}).$mount("#app")},"57d1":function(t,e,n){},"8d03":function(t,e,n){},"8d82":function(t,e,n){},"8f62":function(t,e,n){"use strict";var o=n("9d57"),i=n.n(o);i.a},"9d57":function(t,e,n){},adf1:function(t,e,n){},c433:function(t,e,n){},cb7e:function(t,e,n){},cbf2:function(t,e,n){"use strict";var o=n("ec00"),i=n.n(o);i.a},cf25:function(t,e,n){"use strict";var o=n("0cfb"),i=n.n(o);i.a},ec00:function(t,e,n){},f9b2:function(t,e,n){"use strict";var o=n("8d03"),i=n.n(o);i.a},fc40:function(t,e,n){"use strict";var o=n("c433"),i=n.n(o);i.a}});
//# sourceMappingURL=app.99814d1d.js.map